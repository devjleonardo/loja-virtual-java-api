<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org/">
  <head>
    <meta charset="UTF-8">
    
    <title>Insert title here</title>
    
    <link rel="stylesheet"
	      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	      
	<link rel="stylesheet"
		  href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
		  
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.map"></script>
  </head>
  <body>
    <div class="container">
      <form style="padding-top: 20px; padding-bottom: 20px" id="form-checkout">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="nome">Nome:</label>
            <input 
              th:value="${venda.pessoa.nome}"
              type="text" 
              class="form-control" 
              id="nome" 
              style="height: 40px" 
              readonly="readonly" 
              required="required">
          </div>
          
          <div class="form-group col-md-6">
            <label for="email">E-mail: </label>
            <input 
              th:value="${venda.pessoa.email}"
              type="text" 
              class="form-control" 
              id="email" 
              style="height: 40px" 
              readonly="readonly" 
              required="required">
          </div>
        </div>
        
        <div class="form-row" id="linha-1-cartao">
          <div class="form-group col-md-6">
            <label for="numero-cartao">Número do cartão:</label>
            <input 
              type="text" 
              class="form-control" 
              id="numero-cartao" 
              placeholder="4950 3396 3352 5518"
              style="height: 40px" 
              required="required">
          </div>
          
          <div class="form-group col-md-6">
            <label for="nome-cartao">Nome como escrito no cartão:</label>
            <input 
              type="text" 
              class="form-control" 
              id="nome-cartao" 
              placeholder="João da Silva"
              style="height: 40px" 
              required="required">
          </div>
        </div>
        
        <div class="form-row" id="div-cpf">
          <div class="form-group col-md-12">
            <label for="cpf">CPF do titular:</label>
            <input 
              type="text" 
              class="form-control" 
              id="cpf" 
              placeholder="000.000.000-00"
              style="height: 40px" 
              required="required">
          </div>
        </div>
        
        <div class="form-row" id="linha-2-cartao">
          <div class="form-group col-md-4">
            <label for="mes-validade">Mês de validade:</label>
            <select class="form-control" id="mes-validade" style="height: 40px" required="required">
                <option value="01">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
                <option value="09">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
          </div>
          
          <div class="form-group col-md-4">
            <label for="ano-validade">Ano de validade:</label>
            <select class="form-control" id="ano-validade" style="height: 40px" required="required">
                <option value="2024">24</option>
                <option value="2025">25</option>
                <option value="2026">26</option>
                <option value="2027">27</option>
                <option value="2028">28</option>
                <option value="2029">29</option>
                <option value="2030">30</option>
                <option value="2031">31</option>
                <option value="2032">32</option>
                <option value="2033">33</option>
                <option value="2034">34</option>
                <option value="2035">35</option>
                <option value="2036">36</option>
                <option value="2037">37</option>
                <option value="2038">38</option>
                <option value="2039">39</option>
                <option value="2040">40</option>
              </select>
          </div>
          
          <div class="form-group col-md-4">
            <label for="cvv">Código de seguranç ou CVV:</label>
            <input 
              type="text" 
              class="form-control" 
              id="cvv" 
              placeholder="380" 
              style="height: 40px" 
              required="required">
          </div>
        </div>
        
        <div class="form-row"> 
          <div class="form-group col-md-12">
            <label for="quantidade-parcela">Selecione o número de parcelas:</label>
            <select class="form-control" id="quantidade-parcela" style="height: 40px" 
                    required="required">
                <option value="1">1x</option>
                <option value="2">2x</option>
                <option value="3">3x</option>
                <option value="4">4x</option>
                <option value="5">5x</option>
                <option value="6">6x</option>
                <option value="7">7x</option>
                <option value="8">8x</option>
                <option value="9">9x</option>
                <option value="10">10x</option>
                <option value="11">11x</option>
                <option value="12">12x</option>
              </select>
          </div>
        </div>
        
        <div class="form-row" id="div-endereco"> 
          <div class="form-group col-md-4">
            <label for="cep">CEP de cobrança:</label>
            <input 
              type="text" 
              class="form-control" 
              id="cep" 
              placeholder="00000-000" 
              style="height: 40px" 
              required="required">
          </div>
          
          <div class="form-group col-md-4">
            <label for="rua">Rua:</label>
            <input 
              type="text" 
              class="form-control" 
              id="rua" 
              style="height: 40px" 
              required="required">
          </div>
          
          <div class="form-group col-md-4">
            <label for="numero">Número:</label>
            <input 
              type="text" 
              class="form-control" 
              id="numero" 
              style="height: 40px" 
              required="required">
          </div>
        </div>
        
        <div class="form-row" id="div-endereco2"> 
       	  <div class="form-group col-md-6">
            <label for="estado">Estado:</label>
            <input 
              type="text" 
              class="form-control" 
              id="estado" 
              placeholder="PR" 
              style="height: 40px" 
              required="required">
          </div>
          
          <div class="form-group col-md-6">
            <label for="cidade">Cidade:</label>
            <input 
              type="text" 
              class="form-control" 
              id="cidade" 
              placeholder="Maringá" 
              style="height: 40px" 
              required="required">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group col-md-12">
            <input 
              type="button" 
              class="btn btn-primary btn-lg" 
              value="Realizar Pagamento" 
              style="font-size: 23px; height: 50px; width: 100%">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group col-md-6">
            <span 
              id="valor-compra" 
              th:text="@{'TOTAL R$: ' + ${venda.valorTotal}}"
              style="font-size: 19px; height: 30px; width: 100%"></span>
          </div>
          
          <div class="form-group col-md-6">
            <span 
              id="valor-desconto" 
              th:text="@{'DESCONTO R$: ' + ${venda.valorDesconto}}"
              style="font-size: 19px; height: 30px; width: 100%"></span>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group col-md-6">
            <span 
              id="valor-frete" 
              th:text="@{'FRETE R$: ' + ${venda.valorFrete}}"
              style="font-size: 19px; height: 30px; width: 100%"></span>
          </div>
        </div>
        
        <hr width="96%" style="color: #726868; border-top: 1px solid #726868;">
        
        <div class="form-row">
          <div class="form-group col-md-6" style="margin-top: 8px;">
            <label>Itens adicionados</label>
            <div th:each="item : ${venda.itensVendaLojaDTO}">
              <span 
                th:text="@{${item.produto.nome} + ' - Quantidade: ' + ${item.quantidade}}" 
                style="height: 15px; width: 100%; font-size: 11px">
              </span>
            </div>
          </div>
        </div>
      </form>
    </div>
    
    <script>
	  $(document).ready(function() {
	
	    function limpa_formulário_cep() {
	      // Limpa valores do formulário de cep.
	      $("#rua").val("");
	      $("#numero").val("");
	      $("#estado").val("");
	      $("#cidade").val("");
	    }
	
	    // Quando o campo cep perde o foco.
	    $("#cep").blur(function() {
	
	      // Nova variável "cep" somente com dígitos.
	      var cep = $(this).val().replace(/\D/g, '');
	
	      // Verifica se campo cep possui valor informado.
	      if (cep != "") {
	
	        // Expressão regular para validar o CEP.
	        var validacep = /^[0-9]{8}$/;
	
	        // Valida o formato do CEP.
	        if(validacep.test(cep)) {
	
	          // Preenche os campos com "..." enquanto consulta webservice.
	      	  $("#rua").val("...");
	          $("#estado").val("...");
	          $("#cidade").val("...");
	
	          // Consulta o webservice viacep.com.br/
	          $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {
	
	            if (!("erro" in dados)) {
	              // Atualiza os campos com os valores da consulta.
	              $("#rua").val(dados.logradouro);
	              $("#estado").val(dados.uf);
	              $("#cidade").val(dados.localidade);
	            } // end if.
	            else {
	              // CEP pesquisado não foi encontrado.
	              limpa_formulário_cep();
	              alert("CEP não encontrado.");
	            }
	          });
	        } // end if.
	        else {
	          // CEP é inválido.
	          limpa_formulário_cep();
	          alert("Formato de CEP inválido.");
	        }
	      } // end if.
	      else {
	        // CEP sem valor, limpa formulário.
	        limpa_formulário_cep();
	      }
	    });
	  });
  
    </script>
  </body>
</html>